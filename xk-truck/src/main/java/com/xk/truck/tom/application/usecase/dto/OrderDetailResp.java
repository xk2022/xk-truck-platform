package com.xk.truck.tom.application.usecase.dto;import com.xk.truck.tom.domain.model.OrderStatus;import com.xk.truck.tom.domain.model.OrderType;import io.swagger.v3.oas.annotations.media.Schema;import lombok.Data;import java.math.BigDecimal;import java.time.LocalDateTime;import java.time.ZonedDateTime;import java.util.List;import java.util.UUID;@Data@Schema(description = "訂單詳情回應（含 Import/Export Detail、指派歷程、狀態歷程）")public class OrderDetailResp {    // ===============================================================    // Identity    // ===============================================================    @Schema(description = "訂單 UUID")    private UUID uuid;    @Schema(description = "訂單編號")    private String orderNo;    // ===============================================================    // Core    // ===============================================================    @Schema(description = "訂單類型（IMPORT/EXPORT）")    private OrderType orderType;    @Schema(description = "訂單狀態")    private OrderStatus orderStatus;    // ===============================================================    // Customer / Address / Schedule    // ===============================================================    @Schema(description = "客戶 UUID")    private UUID customerUuid;    @Schema(description = "取件地址")    private String pickupAddress;    @Schema(description = "送達地址")    private String deliveryAddress;    @Schema(description = "預計時段")    private ZonedDateTime scheduledAt;    // ===============================================================    // Shipping / Container / Route    // ===============================================================    @Schema(description = "船公司")    private String shippingCompany;    @Schema(description = "船名/航次")    private String vesselVoyage;    @Schema(description = "櫃號")    private String containerNo;    @Schema(description = "櫃型")    private String containerType;    @Schema(description = "件數")    private Integer packageQty;    @Schema(description = "毛重")    private BigDecimal grossWeight;    @Schema(description = "CBM")    private BigDecimal cbm;    @Schema(description = "POL")    private String pol;    @Schema(description = "POD")    private String pod;    @Schema(description = "ETD")    private LocalDateTime etd;    @Schema(description = "ETA")    private LocalDateTime eta;    // ===============================================================    // Note    // ===============================================================    @Schema(description = "備註")    private String note;    // ===============================================================    // Current Assignment (主表同步的當前指派，前端顯示最方便)    // ===============================================================    @Schema(description = "目前指派車輛 UUID（主表同步）")    private UUID vehicleUuid;    @Schema(description = "目前指派司機 UUID（主表同步）")    private UUID driverUuid;    @Schema(description = "目前指派資訊（便於前端直接顯示）")    private CurrentAssignmentResp currentAssignment;    // ===============================================================    // Type-specific Detail (exactly one)    // ===============================================================    @Schema(description = "進口訂單明細（orderType=IMPORT 才有）")    private ImportDetailResp importDetail;    @Schema(description = "出口訂單明細（orderType=EXPORT 才有）")    private ExportDetailResp exportDetail;    // ===============================================================    // Histories    // ===============================================================    @Schema(description = "派單歷程（由新到舊）")    private List<AssignmentResp> assignments;    @Schema(description = "狀態歷程（由新到舊）")    private List<StatusLogResp> statusLogs;    // ===============================================================    // Audit    // ===============================================================    @Schema(description = "建立時間")    private ZonedDateTime createdTime;    @Schema(description = "更新時間")    private ZonedDateTime updatedTime;    @Schema(description = "建立者")    private String createdBy;    @Schema(description = "更新者")    private String updatedBy;    // ===============================================================    // Nested DTOs    // ===============================================================    @Data    @Schema(description = "目前指派資訊（快速顯示用）")    public static class CurrentAssignmentResp {        @Schema(description = "車輛 UUID")        private UUID vehicleUuid;        @Schema(description = "司機 UUID")        private UUID driverUuid;        @Schema(description = "指派時間（取 assignments 最新一筆的 assignedTime）")        private ZonedDateTime assignedTime;        @Schema(description = "指派備註（取 assignments 最新一筆 note）")        private String note;    }    @Data    @Schema(description = "派單歷程項目")    public static class AssignmentResp {        @Schema(description = "派單紀錄 UUID")        private UUID uuid;        @Schema(description = "車輛 UUID")        private UUID vehicleUuid;        @Schema(description = "司機 UUID")        private UUID driverUuid;        @Schema(description = "指派時間")        private ZonedDateTime assignedTime;        @Schema(description = "結束時間（撤派/改派時可填）")        private ZonedDateTime endedTime;        @Schema(description = "備註")        private String note;    }    @Data    @Schema(description = "狀態歷程項目")    public static class StatusLogResp {        @Schema(description = "狀態紀錄 UUID")        private UUID uuid;        @Schema(description = "原狀態")        private OrderStatus fromStatus;        @Schema(description = "新狀態")        private OrderStatus toStatus;        @Schema(description = "原因/備註")        private String reason;        @Schema(description = "建立時間")        private ZonedDateTime createdTime;        @Schema(description = "建立者")        private String createdBy;    }    @Data    @Schema(description = "進口訂單明細（IMPORT）")    public static class ImportDetailResp {        @Schema(description = "提貨/送貨單地點（CY/CFS/倉庫...）")        private String deliveryOrderLocation;        @Schema(description = "提單號 BL No")        private String blNo;        @Schema(description = "進口報關號")        private String importDeclNo;        @Schema(description = "通關放行時間")        private LocalDateTime customsReleaseTime;        @Schema(description = "倉庫")        private String warehouse;        @Schema(description = "到港通知/文件備註")        private String arrivalNotice;    }    @Data    @Schema(description = "出口訂單明細（EXPORT）")    public static class ExportDetailResp {        @Schema(description = "訂艙號")        private String bookingNo;        @Schema(description = "裝櫃日")        private LocalDateTime stuffingDate;        @Schema(description = "結關時間")        private LocalDateTime cutoffTime;        @Schema(description = "出口報關號")        private String exportDeclNo;        @Schema(description = "裝櫃地點")        private String stuffingLocation;        @Schema(description = "截關日")        private LocalDateTime cutOffDate;        @Schema(description = "S/O No")        private String soNo;        @Schema(description = "報關行")        private String customsBroker;    }}